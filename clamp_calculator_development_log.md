# Clamp Calculator 開発ログ

## 概要
本文書は、**Clamp Calculator v3.1** の開発プロセスと主要機能についてまとめたものです。このツールは、プロジェクトの既存 SCSS 設定（`_mixin.scss` および `_function.scss`）とシームレスに連携し、高度なタイポグラフィ制御を実現するために強化されました。

## 実装機能一覧

### 1. 比率による自動計算 (Auto-Scale)
デザインカンプの基準幅に基づき、最小サイズ・最大サイズの入力を効率化する機能です。

*   **トグルスイッチ**: Mobile/Desktop 各カードに追加された「Auto-Scale」チェックボックスで ON/OFF を切り替えられます。
*   **自動計算ロジック**:
    *   **Mobile**: 375px → 768px の比率（約 2.048倍）に基づき計算。
    *   **Desktop**: 768px → 1440px の比率（約 1.875倍）に基づき計算。
    *   片方の値を入力すると、この比率に基づいてもう片方の値が自動的に補完されます。

### 2. 高度な Mixin サポート (`txt()` & `txt-option()`)
プロジェクトのミックスインを最大限活用するため、単なる `font-size` 生成以上の機能を実装しました。

*   **入力フィールド**: `font-weight`, `color`, `text-align` (txt用) や `line-height`, `letter-spacing` (txt-option用) の入力欄を追加。
*   **インテリジェントな出力生成**: デフォルト値と異なる場合のみ引数を含めることで、クリーンな SCSS コードを生成します。
    *   *通常*: `@include txt(clamp(...));`
    *   *オプションあり*: `@include txt(clamp(...), 700, #333); @include txt-option(1.5);`

### 3. リサイズハンドル付きリアルタイムプレビュー
ツールを離れることなく、`clamp()` の挙動を直感的に確認できるプレビュー機能を実装しました。

*   **リサイズ可能なコンテナ**: CSS の `resize: horizontal` を利用し、疑似的に画面幅の変更をシミュレートできます。
*   **視覚的ハンドル**: ボックス右下に「ここをドラッグ」と分かるハンドルアイコン（CSSで描画）を追加。
*   **幅表示**: `ResizeObserver` を使用してコンテナ幅を常時監視し、「Width: X px」とリアルタイムで表示します。
*   **スタイル連動**: 文字サイズだけでなく、太さ・色・行間・文字間隔も入力値に合わせて即座に反映されます。

### 4. コンテキスト認識型 VW コンバーター
レスポンシブデザインに不可欠な VW（Viewport Width）単位への変換ツールです。

*   **コンテキストロジック**:
    *   基準幅が **1440px** (PC) の場合 → `toVw(px)` を生成。
    *   基準幅が **375px** (SP) の場合 → `toVw2(px)` を生成。
    *   その他の幅の場合 → `toVw(px, width)` を生成。
*   プロジェクトの `_function.scss` と同じロジックを採用しているため、コピー＆ペーストでそのまま使えます。

### 5. 逆変換ツール (Reverse Calculator)
既存の `clamp()` コードを解析し、その意図を読み解くためのツールです。

*   **正規表現による解析**: 標準的な `clamp()` 文字列から `minRem`, `slopeVw`, `interceptRem`, `maxRem` を抽出します。
*   **逆算ロジック**: 抽出した値から、元の「最小・最大フォントサイズ(px)」と「クランプが効き始める・終わる画面幅(px)」を逆算して表示します。

### 6. 基本フォントサイズ設定 (Base Font Size)
「62.5% テクニック（1rem = 10px）」など、プロジェクトごとのルートフォント設定に対応しました。

*   **グローバル設定**: 画面上部の設定バーで基準サイズを変更可能。
*   **即時反映**: 値を変更すると、すべての計算結果（rem値）が瞬時に再計算されます。

## 技術的実装詳細

*   **スタック**: Vanilla HTML/CSS/JS。ビルド不要で、ブラウザでファイルを開くだけで動作します。
*   **デザイン**: `backdrop-filter` を使用したグラスモーフィズム（すりガラス）エフェクトを採用し、モダンで没入感のあるダークテーマ UI を実現。
*   **データ保持**: ステートは一時的（セッションのみ）であり、軽量かつプライバシーに配慮した設計です。
*   **クリップボード連携**: ワンクリックでコピーでき、「Copied!」のツールチップでフィードバックを返します。

このツールは、デザイン（px）と実装（rem/vw/mixin）の橋渡しをする、流動的タイポグラフィのための完全なソリューションです。
